<section id="page-ai-call">
    <link rel="stylesheet" href="css/style1.css">
  <style>
    :root{
      --bg:#f7f8fb; --panel:#fff; --text:#0f172a; --muted:#6b7280;
      --border:#e5e7eb; --radius:18px; --shadow:0 8px 24px rgba(16,24,40,.06);
      --brand:#6c4df6; --brand-strong:#5b3df0;
      --line:#e7edf7;
    }
    *{box-sizing:border-box}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:18px}
    .card .header{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700;display:flex;align-items:center;justify-content:space-between}
    .card .body{padding:16px}
    .btn{border:0;border-radius:14px;padding:10px 14px;font-weight:700;display:inline-flex;gap:8px;align-items:center;cursor:pointer;box-shadow:var(--shadow);transition:background .15s ease, transform .06s ease}
    .btn:active{transform:translateY(1px)}
    .btn.gray{background:#f3f4f6;color:#1f2937;border:1px solid var(--border)}
    .btn.primary{background:var(--brand);color:#fff}
    .btn.primary:hover{background:var(--brand-strong)}
    .btn[disabled]{opacity:.6;cursor:not-allowed}
    .input,.select{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:#fff}
    .assistants-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 16px; }
    .assistant-card { border: 1px solid #dbe2f0; border-radius: 16px; background: #fff; padding: 16px; display: flex; flex-direction: column; gap: 12px; box-shadow: 0 6px 18px rgba(2,6,23,.08); }
    .assistant-top { display: flex; align-items: center; justify-content: space-between; background: linear-gradient(90deg, rgba(108,77,246,.05), transparent); border-radius: 12px; padding: 8px 12px; gap: 12px; }
    .assistant-avatar { width: 44px; height: 44px; border-radius: 50%; object-fit: cover; }
    .assistant-name { margin: 0; font-size: 16px; font-weight: 700; }
    .assistant-badge { display: inline-block; margin-top: 2px; padding: 4px 10px; border-radius: 8px; font-size: 12px; font-weight: 700; background: #eaf6ee; color: #166534; }
    .assistant-menu { width: 32px; height: 32px; border-radius: 8px; border: 1px solid #e5e7eb; background: #fff; display:flex; align-items:center; justify-content:center; cursor:pointer; }
    .assistant-title { font-size: 18px; font-weight: 700; color: #162449; margin: 0; }
    .assistant-company { display:flex; align-items:center; gap:8px; font-size:14px; font-weight:600; color:#8b2b2b; }
    .briefcase-ic { background:#fde8e8; color:#b91c1c; width:22px; height:22px; border-radius:6px; display:flex; align-items:center; justify-content:center; }
    .assistant-divider { height:1px; border:0; background:#e7edf7; }
    .assistant-actions { display:flex; gap:12px; margin-top:6px; }
    .status{font-size:13px;color:var(--muted)}
    .spinner{width:12px;height:12px;border:2px solid #93c5fd;border-top-color:transparent;border-radius:50%;display:inline-block;animation:spin .8s linear infinite;margin-right:6px}
    @keyframes spin{to{transform:rotate(360deg)}}
    .subnav{display:flex;gap:10px;flex-wrap:wrap}
    .chip{padding:8px 12px;border-radius:999px;border:1px solid var(--border);background:#fff;font-weight:700;cursor:pointer}
    .chip.active{background:#eef2ff;border-color:#dbe2f0;color:#3730a3}
    .filters{display:grid;grid-template-columns:repeat(6,1fr);gap:10px;margin-top:12px}
    @media (max-width: 980px){ .filters{grid-template-columns:repeat(2,1fr)} }
    .table-wrap{margin-top:12px;border:1px solid var(--border);border-radius:14px;overflow:auto}
    table{width:100%;border-collapse:separate;border-spacing:0}
    thead th{position:sticky;top:0;background:#f8fafc;font-size:12px;color:#64748b;text-align:left;padding:10px;border-bottom:1px solid var(--border)}
    tbody td{padding:12px;border-bottom:1px solid #f1f5f9;font-size:14px}
    tbody tr:hover{background:#fbfdff}
    .status-pill{padding:6px 10px;border-radius:999px;font-weight:700;font-size:12px;display:inline-block}
    .status-success{background:#e8fff6;color:#065f46}
    .status-failed{background:#fee2e2;color:#991b1b}
    .status-ongoing{background:#fff7ed;color:#9a3412}
    .pagination{display:flex;align-items:center;justify-content:space-between;margin-top:12px;gap:10px}
    .page-buttons{display:flex;gap:8px}
    .btn-lite{border:1px solid var(--border);background:#fff;border-radius:10px;padding:8px 10px;font-weight:700;cursor:pointer}
    .page-info{font-size:12px;color:#64748b}
    .modal.hidden { display:none; }
    .modal { position:fixed; inset:0; z-index:1000; }
    .modal__backdrop { position:absolute; inset:0; background:rgba(2,6,23,.45); backdrop-filter:saturate(120%) blur(2px); }
    .modal__dialog {
      position:relative; z-index:1; width:min(880px, 92vw); max-height:86vh; overflow:auto;
      margin:6vh auto 0; background:#fff; border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow);
    }
    .modal__header, .modal__footer { padding:12px 16px; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; }
    .modal__footer { border-top:1px solid var(--border); border-bottom:0; }
    .modal__body { padding:14px 16px; }
    .modal__close { border:1px solid var(--border); background:#fff; border-radius:10px; padding:6px 10px; cursor:pointer; }
    .kv { display:grid; grid-template-columns: 200px 1fr; gap:10px 14px; }
    .kv .k { color:#64748b; font-weight:600; }
    .kv .v { white-space:pre-wrap; word-break:break-word; }
    .kv .sep { grid-column: 1 / -1; height:1px; background:#e7edf7; margin:4px 0; border-radius:999px; }
    .kv code.json { display:block; padding:10px; border:1px solid var(--border); border-radius:10px; background:#f8fafc; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:12px; }



  </style>
<style>
    /* ---------- AI Call: Dark-mode fixes (place AFTER all other CSS) ---------- */

/* Support both class-based dark and system dark */
@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;
    --bg:#0b1220;
    --panel:#0f172a;
    --text:#e5e7eb;
    --muted:#94a3b8;
    --border:#1f2937;
    --line:#1e293b;
    --chip-bg:#052e1c;
    --chip-text:#34d399;
    --brand:#8b77ff;
    --brand-strong:#a18bff;
  }
}
html.dark, [data-theme="dark"] {
  --bg:#0b1220;
  --panel:#0f172a;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --border:#1f2937;
  --line:#1e293b;
  --chip-bg:#052e1c;
  --chip-text:#34d399;
  --brand:#8b77ff;
  --brand-strong:#a18bff;
}

/* Base surface + text */
html.dark body, [data-theme="dark"] body { background:var(--bg); color:var(--text); }

/* Panels/cards that were white */
html.dark .card, [data-theme="dark"] .card,
html.dark .assistant-card, [data-theme="dark"] .assistant-card,
html.dark .assistant-menu, [data-theme="dark"] .assistant-menu {
  background:var(--panel) !important;
  border-color:var(--border) !important;
  box-shadow:0 8px 28px rgba(0,0,0,.35) !important;
}
html.dark .assistant-divider, [data-theme="dark"] .assistant-divider { background:var(--line) !important; }

/* Text in headers looked washed out */
html.dark .card .header, [data-theme="dark"] .card .header { color:var(--text) !important; }

/* Badges/chips */
html.dark .assistant-badge, [data-theme="dark"] .assistant-badge {
  background:var(--chip-bg) !important; color:var(--chip-text) !important;
}
html.dark .chip, [data-theme="dark"] .chip {
  background:var(--panel) !important; color:var(--text) !important; border-color:var(--border) !important;
}
html.dark .chip.active, [data-theme="dark"] .chip.active {
  background:rgba(139,119,255,.18) !important; border-color:#6c4df6 !important; color:#dcd7ff !important;
}

/* Buttons & inputs */
html.dark .btn.gray, [data-theme="dark"] .btn.gray {
  background:#1e293b !important; color:var(--text) !important; border:1px solid var(--border) !important;
}
html.dark .btn-lite, [data-theme="dark"] .btn-lite {
  background:#0b1220 !important; color:var(--text) !important; border-color:var(--border) !important;
}
html.dark .input, [data-theme="dark"] .input,
html.dark .select, [data-theme="dark"] .select,
html.dark textarea, [data-theme="dark"] textarea {
  background:#0b1220 !important; color:var(--text) !important; border-color:var(--border) !important;
}

/* Table */
html.dark thead th, [data-theme="dark"] thead th {
  background:#0b1626 !important; color:#9fb3c8 !important; border-bottom:1px solid var(--border) !important;
}
html.dark tbody td, [data-theme="dark"] tbody td {
  color:var(--text) !important; border-bottom:1px solid var(--border) !important;
}
html.dark tbody tr:hover, [data-theme="dark"] tbody tr:hover { background:#0c1a2d !important; }

/* Status text/pills */
html.dark .status, [data-theme="dark"] .status { color:var(--muted) !important; }
html.dark .status-success, [data-theme="dark"] .status-success { background:rgba(16,185,129,.18) !important; color:#34d399 !important; }
html.dark .status-failed,  [data-theme="dark"] .status-failed  { background:rgba(239,68,68,.18) !important;  color:#f87171 !important; }
html.dark .status-ongoing, [data-theme="dark"] .status-ongoing { background:rgba(245,158,11,.18) !important; color:#fbbf24 !important; }

/* Modal */
html.dark .modal__dialog, [data-theme="dark"] .modal__dialog { background:var(--panel) !important; border-color:var(--border) !important; }
html.dark .modal__header, html.dark .modal__footer,
[data-theme="dark"] .modal__header, [data-theme="dark"] .modal__footer { border-color:var(--border) !important; }
html.dark .kv .k, [data-theme="dark"] .kv .k { color:#9fb3c8 !important; }
html.dark .kv code.json, [data-theme="dark"] .kv code.json {
  background:#0b1626 !important; border-color:var(--border) !important; color:var(--text) !important;
}

</style>
  <section class="card">
    <div class="header">
      <span>ðŸ¤– AI Call Assistants</span>
      <div>
        <button class="btn gray" id="refreshBtn">Refresh</button>
        <button class="btn primary" id="openCreateBtn">âž• Create Assistant</button>
      </div>
    </div>
    <div class="body">
      <div id="statusText" class="status"><span class="spinner"></span> Loading assistantsâ€¦</div>
    </div>
  </section>

  <section class="card">
    <div class="header">
      Existing Assistants
      <span id="countPill" class="assistant-badge" style="display:none"></span>
    </div>
    <div class="body">
      <div id="assistantsList" class="assistants-grid" aria-live="polite"></div>
      <div id="emptyState" class="status" style="display:none">No assistants found.</div>
    </div>

    <template id="assistantCardTemplate">
      <article class="assistant-card" data-assistant-id="">
        <header class="assistant-top">
          <img data-role="avatar" class="assistant-avatar" src="https://placehold.co/112x112" alt="Assistant avatar" />
          <div>
            <h3 class="assistant-name" data-role="name">Assistant Name</h3>
            <span class="assistant-badge" data-role="direction">OUTBOUND</span>
          </div>
          <button class="assistant-menu" title="More actions">â‹¯</button>
        </header>
        <h4 class="assistant-title" data-role="title">Customer Engagement and Relationship Management</h4>
        <div class="assistant-company">
          <span class="briefcase-ic" aria-hidden="true">ðŸ’¼</span>
          <span data-role="company">Awaaz ai</span>
        </div>
        <hr class="assistant-divider" />
        <div class="assistant-actions">
          <button class="btn primary" data-action="assistant-call">ðŸ“ž Call</button>
        </div>
        <input type="hidden" data-role="hidden-name" />
        <input type="hidden" data-role="hidden-phone" />
      </article>
    </template>
  </section>

  <section class="card" id="createCard" style="display:none;">
    <div class="header">
      <span>Create New Assistant</span>
      <div>
        <button class="btn gray" id="cancelCreateBtn">Cancel</button>
        <button class="btn primary" id="createBtn">Create</button>
      </div>
    </div>
    <div class="body" style="display:grid;gap:12px">
      <input id="ca_name" class="input" placeholder="Assistant Name" />
      <input id="ca_company" class="input" placeholder="Company / Brand" />
      <input id="ca_voice" class="input" placeholder="Voice (optional)" />
      <textarea id="ca_prompt" class="input" rows="4" placeholder="System Prompt / Persona"></textarea>
      <div id="createStatus" class="status"></div>
    </div>
  </section>

  <section class="card" id="callHistoryCard">
    <div class="header">
      <span>ðŸ“ž Call History</span>
      <div class="subnav" id="callsSubnav">
        <button class="chip active" data-filter-chip="all">All</button>
        <button class="chip" data-filter-chip="OUTBOUND">Outbound</button>
        <button class="chip" data-filter-chip="INBOUND">Inbound</button>
        <button class="chip" data-filter-chip="FAILED">Failed</button>
        <button class="chip" data-filter-chip="COMPLETED">Completed</button>
      </div>
    </div>
    <div class="body">
      <div class="filters">
        <select id="fltAssistant" class="select"><option value="">All assistants</option></select>
        <select id="fltStatus" class="select">
          <option value="">Any status</option>
          <option value="COMPLETED">Completed</option>
          <option value="FAILED">Failed</option>
          <option value="ONGOING">Ongoing</option>
        </select>
        <input id="fltSearch" class="input" placeholder="Search name / number / call id" />
        <input id="fltFrom" type="date" class="input" />
        <input id="fltTo" type="date" class="input" />
        <select id="pageSize" class="select"><option>10</option><option selected>20</option><option>50</option></select>
      </div>

      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th style="min-width:140px">Time</th>
              <th style="min-width:120px">Assistant</th>
              <th style="min-width:160px">Customer</th>
              <th style="min-width:140px">Number</th>
              <th style="min-width:110px">Status</th>
              <th style="min-width:100px">Duration</th>
              <th style="min-width:160px">Call ID</th>
              <th style="min-width:120px">Actions</th>
            </tr>
          </thead>
          <tbody id="callsTbody"></tbody>
        </table>
      </div>

      <div class="pagination">
        <div class="page-buttons">
          <button id="prevPage" class="btn-lite">âŸ¨ Prev</button>
          <button id="nextPage" class="btn-lite">Next âŸ©</button>
        </div>
        <div class="page-info" id="pageInfo">Page 1 of 1</div>
      </div>
    </div>

    <template id="callRowTemplate">
      <tr>
        <td data-col="time">â€”</td>
        <td data-col="assistant">â€”</td>
        <td data-col="customer">â€”</td>
        <td data-col="number">â€”</td>
        <td data-col="status"><span class="status-pill status-ongoing">ONGOING</span></td>
        <td data-col="duration">â€”</td>
        <td data-col="callId">â€”</td>
        <td data-col="actions">
          <button class="btn-lite" data-action="view-call">View</button>
          <button class="btn-lite" data-action="download-call">Download</button>
        </td>
      </tr>
    </template>

    <script id="mockCalls" type="application/json">
      {
        "calls": [
          {"time":"2025-08-27T12:41:00Z","assistantId":"asst_001","assistantName":"Manisha","direction":"OUTBOUND","customerName":"Rohan Sharma","number":"+917350348860","status":"COMPLETED","durationSec":183,"callId":"CALL-7A2D9E"},
          {"time":"2025-08-27T11:05:00Z","assistantId":"asst_002","assistantName":"Arun","direction":"OUTBOUND","customerName":"Priya N","number":"+919999888877","status":"FAILED","durationSec":12,"callId":"CALL-1B8F22"},
          {"time":"2025-08-26T16:15:00Z","assistantId":"asst_001","assistantName":"Manisha","direction":"INBOUND","customerName":"Ketan Patel","number":"+918888777766","status":"COMPLETED","durationSec":245,"callId":"CALL-5C1AA0"},
          {"time":"2025-08-26T10:02:00Z","assistantId":"asst_003","assistantName":"Neha","direction":"OUTBOUND","customerName":"Nisha","number":"+911234567890","status":"ONGOING","durationSec":47,"callId":"CALL-00Z9AA"}
        ]
      }
    </script>
  </section>

  <div id="callDetailModal" class="modal hidden" aria-hidden="true">
    <div class="modal__backdrop"></div>
    <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="callDetailTitle">
      <div class="modal__header">
        <h3 id="callDetailTitle">Call Details</h3>
        <button class="modal__close" id="callDetailClose" aria-label="Close">âœ•</button>
      </div>
      <div class="modal__body">
        <div id="callDetailContent" class="kv"></div>
      </div>
      <div class="modal__footer">
        <button class="btn gray" id="callDetailClose2">Close</button>
      </div>
    </div>
  </div>
</section>
