<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Vistaar AI</title>
  <style>
    :root{
      /* NEW pastel theme */
      --bg:#f6f7fb;                 /* page background */
      --grad1:#edf1ff;              /* top-left mist */
      --grad2:#ffd1e6;              /* pink */
      --grad3:#ffb07a;              /* peach */
      --text:#0f172a;               /* primary text (dark slate) */
      --muted:#6b7486;              /* secondary text */
      --card:#ffffff;               /* card background */
      --border:#e8ebf2;             /* soft border */
      --chip:#f3f5fb;               /* chip background */
      --ring:#9ab4ff55;             /* focus ring */
      --shadow:0 8px 24px rgba(20,24,40,.08);

      /* colorful card gradients */
      --g-sales: linear-gradient(135deg,#ff8aa8,#ffc38d);
      --g-leads: linear-gradient(135deg,#89a0ff,#8afff0);
      --g-users: linear-gradient(135deg,#7de3ff,#c1a6ff);
      --g-crm:   linear-gradient(135deg,#ffb1e6,#ffd28e);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: Inter, system-ui, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
              radial-gradient(900px 700px at 0% 0%, var(--grad1), transparent 60%),
              radial-gradient(900px 700px at 100% 0%, var(--grad2), transparent 55%),
              radial-gradient(900px 700px at 100% 100%, var(--grad3), transparent 55%),
              var(--bg);
    }

    .app{max-width:1200px;margin:0 auto;padding:24px;display:grid;gap:20px}
    .topbar{display:flex;align-items:center;gap:14px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .logo{width:36px;height:36px;border-radius:12px;background:conic-gradient(from 210deg,#ff7a7a,#ffd26f,#7affb9,#7aaaff,#ff7aee,#ff7a7a);box-shadow:var(--shadow)}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    @media (max-width:900px){.grid{grid-template-columns:repeat(6,1fr)}}
    @media (max-width:560px){.grid{grid-template-columns:repeat(2,1fr)}}

    /* CARD â€“ light style */
    .card{
      grid-column:span 3;
      position:relative; isolation:isolate;
      min-height:150px; border-radius:18px; overflow:hidden;
      background:var(--card);
      border:1px solid var(--border);
      display:flex; flex-direction:column; justify-content:space-between;
      padding:16px; cursor:pointer; box-shadow:var(--shadow);
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .card:hover,.card:focus-visible{
      transform:translateY(-3px);
      box-shadow:0 14px 36px rgba(20,24,40,.12);
      outline: none;
    }
    .card .chip{
      font-size:12px; padding:6px 10px; border-radius:999px;
      background:var(--chip); color:var(--muted); border:1px solid var(--border);
      width:max-content;
    }
    .card .title{font-size:18px; font-weight:700; margin-top:6px}
    .card .desc{font-size:13px; color:var(--muted)}
    .card .icon{
      position:absolute; right:12px; bottom:10px; font-size:38px; opacity:.85;
      filter: drop-shadow(0 2px 6px rgba(0,0,0,.12));
    }
    /* Soft color wash in corner */
    .grad{position:absolute; inset:0; z-index:-1}
    .grad::before{
      content:""; position:absolute; right:-20%; top:-20%; width:70%; height:70%;
      filter: blur(40px); opacity:.55; background: var(--g, var(--g-sales));
    }

    .tip{color:var(--muted); font-size:12px}

    /* POPUP (light) */
    .page{position:fixed; inset:0; display:none; place-items:center;
      background:rgba(240,242,248,.6); backdrop-filter: blur(6px); z-index:20}
    .sheet{
      width:min(1000px,94vw); height:min(700px,88vh);
      border-radius:22px; border:1px solid var(--border);
      background: var(--card); box-shadow: 0 30px 80px rgba(20,24,40,.18);
      display:flex; flex-direction:column;
    }
    .sheet header{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 18px; border-bottom:1px solid var(--border)
    }
    .sheet h2{margin:0; font-size:18px}
    .btn{
      padding:8px 12px; border-radius:12px; background:var(--chip); color:var(--text);
      border:1px solid var(--border); cursor:pointer
    }
    .viewport{position:relative; flex:1; border-bottom-left-radius:22px; border-bottom-right-radius:22px; overflow:hidden}
    .viewport iframe{position:absolute; inset:0; width:100%; height:100%; border:0}
    .loader{position:absolute; inset:0; display:grid; place-items:center; background:#fff8; color:#445; font-size:14px}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; font-size:12px; border:1px solid var(--border); background:var(--chip); color:var(--muted)}
  </style>
</head>
<body>
<div class="app">
  <div class="topbar">
    <div class="brand"><div class="logo" aria-hidden="true"></div> Vistaar AI</div>
  </div>

  <section id="cards" class="grid" aria-label="Main menu"></section>

</div>

<!-- Popup -->
<div id="page" class="page" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="sheet">
    <header>
      <h2 id="pageTitle">Page</h2>
      <div style="display:flex;gap:8px;align-items:center">
        <span id="pagePill" class="pill">Module</span>
        <button class="btn" id="closeBtn">Close</button>
      </div>
    </header>
    <div class="viewport" id="viewport"></div>
  </div>
</div>

<script>
  /* MENU: same behavior; gradients mapped to pastel palette */
  const MENU = [
    { id:'aiCalls', title:'AI Agent Calls', desc:'Call details with client', icon:'ðŸ“ˆ', gradient:'var(--g-sales)',
        url:'ai-call.html' },
      { id:'leads', title:'Leads', desc:'Open external page', icon:'ðŸ§²', gradient:'var(--g-leads)',
      url:'call-agents.html' },  // opens in iframe popup
    { id:'users', title:'Users', desc:'Activity & cohorts', icon:'ðŸ‘¥', gradient:'var(--g-users)',
      html:`<div style="padding:18px;color:#334">Users internal content placeholder</div>`},
    { id:'crm',   title:'Chat',   desc:'Chat with AI assistant', icon:'ðŸ“’', gradient:'var(--g-crm)',
      url:'TestChat.html'},
      { id:'pp',   title:'Product Promotion (Image)',   desc:'Promote your product', icon:'ðŸ“’', gradient:'var(--g-crm)',
          url:'promotion-image.html'},
  ];

  const elCards = document.getElementById('cards');
  function cardTpl(m){
    return `<article class="card" tabindex="0" role="button" data-id="${m.id}" aria-label="${m.title}">
    <div class="grad" style="--g:${m.gradient}"></div>
    <span class="chip">Module</span>
    <div class="title">${m.title}</div>
    <div class="desc">${m.desc}</div>
    <div class="icon" aria-hidden="true">${m.icon}</div>
  </article>`;
  }
  elCards.innerHTML = MENU.map(cardTpl).join('');

  /* popup */
  const page = document.getElementById('page');
  const pageTitle = document.getElementById('pageTitle');
  const pagePill = document.getElementById('pagePill');
  const viewport = document.getElementById('viewport');

  function openModule(id){
    const m = MENU.find(x=>x.id===id); if(!m) return;
    pageTitle.textContent = m.title; pagePill.textContent = m.title;
    viewport.innerHTML = '';

    if(m.url){
      const loader = document.createElement('div'); loader.className='loader'; loader.textContent='Loadingâ€¦';
      const iframe = document.createElement('iframe'); iframe.src = m.url; iframe.onload = ()=> loader.remove();
      viewport.append(loader, iframe);
    } else {
      const box = document.createElement('div'); box.innerHTML = m.html || '';
      viewport.appendChild(box);
    }
    page.style.display='grid'; page.setAttribute('aria-hidden','false'); history.replaceState(null,'',`#/${id}`);
  }

  function closePopup(){
    page.style.display='none'; page.setAttribute('aria-hidden','true'); history.replaceState(null,'','#'); viewport.innerHTML='';
  }

  elCards.addEventListener('click', e=>{
    const card = e.target.closest('.card'); if(card) openModule(card.dataset.id);
  });
  document.getElementById('closeBtn').addEventListener('click', closePopup);
  page.addEventListener('click', e=> { if(e.target===page) closePopup(); });
  window.addEventListener('keydown', e=> { if(e.key==='Escape' && page.style.display==='grid') closePopup(); });

  /* deep link */
  window.addEventListener('load', ()=> {
    const id = location.hash.replace('#/',''); if(id) openModule(id);
  });
</script>
</body>
</html>
