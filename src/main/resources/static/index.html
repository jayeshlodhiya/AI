<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VISTAAR - AI Solutions for Business Expansion</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #7c3aed;
            --accent: #f59e0b;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --bg-light: #f9fafb;
            --white: #ffffff;
            --gradient: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --success: #16a34a;
            --error: #b91c1c;
            --warn: #b45309;
            --radius: 14px;
        }

        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: var(--text-dark); overflow-x: hidden; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        /* Navigation */
        nav { position: fixed; top: 0; left: 0; right: 0; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); z-index: 1000; transition: all 0.3s ease; }
        nav.scrolled { background: var(--white); box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); }
        .nav-content { display: flex; align-items: center; justify-content: space-between; padding: 1rem 0; }
        .logo { font-size: 2rem; font-weight: 800; background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .nav-links { display: flex; list-style: none; gap: 2rem; }
        .nav-links a { text-decoration: none; color: var(--text-dark); font-weight: 500; transition: color 0.3s ease; position: relative; }
        .nav-links a:hover { color: var(--primary); }
        .nav-links a::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 0; height: 2px; background: var(--primary); transition: width 0.3s ease; }
        .nav-links a:hover::after { width: 100%; }
        .cta-button { background: var(--gradient); color: var(--white); padding: 0.75rem 1.5rem; border: none; border-radius: 50px; font-weight: 600; text-decoration: none; cursor: pointer; transition: all 0.3s ease; box-shadow: var(--shadow-lg); }
        .cta-button:hover { transform: translateY(-2px); box-shadow: var(--shadow-xl); }

        /* Hero */
        .hero { min-height: 100vh; display: flex; align-items: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); position: relative; overflow: hidden; }
        .hero::before { content: ''; position: absolute; inset: 0; background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.05)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>'); opacity: 0.3; }
        .hero-content { position: relative; z-index: 2; text-align: center; color: var(--white); }
        .hero h1 { font-size: clamp(2.5rem, 5vw, 4rem); font-weight: 900; margin-bottom: 1.5rem; opacity: 0; animation: fadeInUp 1s ease 0.3s both; }
        .hero p { font-size: 1.25rem; margin-bottom: 2rem; opacity: 0; animation: fadeInUp 1s ease 0.6s both; max-width: 600px; margin-inline: auto; }
        .hero-buttons { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; opacity: 0; animation: fadeInUp 1s ease 0.9s both; }
        .btn-primary { background: var(--white); color: var(--primary); padding: 1rem 2rem; border: none; border-radius: 50px; font-weight: 600; text-decoration: none; cursor: pointer; transition: all 0.3s ease; box-shadow: var(--shadow-lg); }
        .btn-secondary { background: transparent; color: var(--white); padding: 1rem 2rem; border: 2px solid var(--white); border-radius: 50px; font-weight: 600; text-decoration: none; cursor: pointer; transition: all 0.3s ease; }
        .btn-primary:hover { transform: translateY(-3px); box-shadow: var(--shadow-xl); }
        .btn-secondary:hover { background: var(--white); color: var(--primary); transform: translateY(-3px); }

        /* Sections */
        .features { padding: 6rem 0; background: var(--bg-light); }
        .section-title { text-align: center; font-size: 2.5rem; font-weight: 800; margin-bottom: 1rem; background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .section-subtitle { text-align: center; font-size: 1.2rem; color: var(--text-light); margin-bottom: 4rem; max-width: 600px; margin-inline: auto; }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 3rem; margin-top: 4rem; }
        .feature-card { background: var(--white); padding: 3rem 2rem; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,.1); text-align: center; transition: all .3s ease; position: relative; overflow: hidden; }
        .feature-card::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,.4), transparent); transition: left .5s ease; }
        .feature-card:hover { transform: translateY(-10px); box-shadow: var(--shadow-xl); }
        .feature-card:hover::before { left: 100%; }
        .feature-icon { width: 80px; height: 80px; background: var(--gradient); border-radius: 20px; display: grid; place-items: center; margin: 0 auto 1.5rem; font-size: 2rem; color: var(--white); position: relative; z-index: 2; }
        .feature-card h3 { font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; color: var(--text-dark); }
        .feature-card p { color: var(--text-light); line-height: 1.7; }

        .benefits { padding: 6rem 0; background: var(--white); }
        .benefits-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-top: 3rem; }
        .benefit-item { text-align: center; padding: 2rem; transition: transform .3s ease; }
        .benefit-item:hover { transform: scale(1.05); }
        .benefit-number { font-size: 3rem; font-weight: 900; background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .benefit-item h4 { font-size: 1.25rem; font-weight: 700; margin-bottom: .5rem; color: var(--text-dark); }
        .benefit-item p { color: var(--text-light); }

        /* Contact Section (new) */
        .contact { padding: 6rem 0; background: var(--bg-light); }
        .contact-wrap { display: grid; grid-template-columns: 1.1fr 1.1fr; gap: 2rem; align-items: start; }
        .contact-card { background: var(--white); border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,.08); padding: 2rem; }
        .contact-card h3 { font-size: 1.5rem; margin-bottom: .75rem; }
        .contact-card p { color: var(--text-light); margin-bottom: 1.25rem; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .form-grid .full { grid-column: 1 / -1; }
        .field { display: flex; flex-direction: column; gap: .4rem; }
        .label { font-weight: 600; font-size: .95rem; color: var(--text-dark); }
        .input, .textarea { border: 1px solid #e5e7eb; border-radius: 12px; padding: .9rem 1rem; font-size: 1rem; outline: none; transition: border .2s ease, box-shadow .2s ease; }
        .textarea { min-height: 120px; resize: vertical; }
        .input:focus, .textarea:focus { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(37,99,235,.1); }
        .contact-meta { background: linear-gradient(135deg, rgba(37,99,235,.08), rgba(124,58,237,.08)); border: 1px dashed rgba(37,99,235,.3); border-radius: 20px; padding: 2rem; }
        .contact-meta ul { list-style: none; display: grid; gap: .6rem; color: var(--text-dark); }
        .contact-meta li strong { color: var(--primary-dark); }
        .submit-row { display: flex; align-items: center; gap: .8rem; margin-top: .4rem; }
        .submit-btn { background: var(--gradient); color: var(--white); padding: .9rem 1.4rem; border: none; border-radius: 12px; font-weight: 700; cursor: pointer; box-shadow: var(--shadow-lg); transition: transform .1s ease, box-shadow .2s ease; }
        .submit-btn:hover { transform: translateY(-1px); box-shadow: var(--shadow-xl); }
        .submit-btn[disabled] { opacity: .65; cursor: not-allowed; }
        .helper { font-size: .9rem; color: var(--text-light); }

        /* Toasts */
        .toast { position: fixed; right: 20px; bottom: 20px; display: grid; gap: .5rem; z-index: 1200; }
        .toast-msg { background: var(--white); border-left: 6px solid var(--success); padding: .9rem 1rem; border-radius: 12px; box-shadow: var(--shadow-lg); min-width: 260px; }
        .toast-msg.error { border-left-color: var(--error); }
        .toast-msg.warn { border-left-color: var(--warn); }

        /* CTA Section (unchanged visual) */
        .cta-section { padding: 6rem 0; background: var(--gradient); text-align: center; position: relative; overflow: hidden; }
        .cta-section::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 1px, transparent 1px); background-size: 50px 50px; animation: float 20s ease-in-out infinite; }
        .cta-content { position: relative; z-index: 2; color: var(--white); }
        .cta-section h2 { font-size: 2.5rem; font-weight: 800; margin-bottom: 1rem; }
        .cta-section p { font-size: 1.2rem; margin-bottom: 2rem; opacity: 0.9; }

        /* Footer */
        footer { background: #1f2937; color: var(--white); text-align: center; padding: 2rem 0; }

        /* Animations & helpers */
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px);} to { opacity: 1; transform: translateY(0);} }
        @keyframes float { 0%,100% { transform: translate(-50%,-50%) rotate(0);} 25% { transform: translate(-60%,-40%) rotate(90deg);} 50% { transform: translate(-40%,-60%) rotate(180deg);} 75% { transform: translate(-30%,-30%) rotate(270deg);} }
        .fade-in { opacity: 0; transform: translateY(20px); transition: all .6s ease; }
        .fade-in.visible { opacity: 1; transform: translateY(0); }

        /* Mobile */
        @media (max-width: 900px) {
            .contact-wrap { grid-template-columns: 1fr; }
            .form-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 768px) {
            .nav-links { display: none; }
            .hero-buttons { flex-direction: column; align-items: center; }
            .features-grid { grid-template-columns: 1fr; }
            .feature-card { padding: 2rem 1.5rem; }
            .section-title { font-size: 2rem; }
            .cta-section h2 { font-size: 2rem; }
        }

        .pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1);} 50% { transform: scale(1.05);} 100% { transform: scale(1);} }
        .stats-counter { font-size: 3rem; font-weight: 900; color: var(--primary); }

        .typing-effect { border-right: 2px solid var(--white); white-space: nowrap; overflow: hidden; animation: typing 4s steps(30) infinite, blink .75s step-end infinite; }
        @keyframes typing { 0% { width: 0;} 50% { width: 100%;} 100% { width: 0;} }
        @keyframes blink { from, to { border-color: transparent;} 50% { border-color: var(--white);} }

        .floating-elements { position: absolute; inset: 0; pointer-events: none; overflow: hidden; }
        .floating-element { position: absolute; width: 4px; height: 4px; background: rgba(255,255,255,.3); border-radius: 50%; animation: floatUp 8s linear infinite; }
        @keyframes floatUp { 0% { transform: translateY(100vh) rotate(0); opacity: 1;} 100% { transform: translateY(-100px) rotate(360deg); opacity: 0;} }
    </style>
</head>
<body>
<!-- Navigation -->
<nav id="navbar">
    <div class="container">
        <div class="nav-content">
            <div class="logo">VISTAAR AI</div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#benefits">Benefits</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <a href="#contact" class="cta-button">Get Started</a>
        </div>
    </div>
</nav>

<!-- Hero Section -->
<section id="home" class="hero">
    <div class="floating-elements"></div>
    <div class="container">
        <div class="hero-content">
            <h1>Transform Your Business with <br><span class="typing-effect">AI-Powered Solutions</span></h1>
            <p>VISTAAR empowers businesses to expand beyond limits with cutting-edge AI technology. Streamline operations, enhance customer interactions, and unlock new growth opportunities.</p>
            <div class="hero-buttons">
                <a href="#features" class="btn-primary">Discover Solutions</a>
                <a href="#benefits" class="btn-secondary">Learn More</a>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section id="features" class="features">
    <div class="container">
        <h2 class="section-title fade-in">Revolutionary AI Features</h2>
        <p class="section-subtitle fade-in">Experience the future of business automation with our intelligent solutions</p>

        <div class="features-grid">
            <div class="feature-card fade-in">
                <div class="feature-icon"><span>ðŸŽ¤</span></div>
                <h3>AI Voice Agent</h3>
                <p>Intelligent conversational AI that handles customer inquiries 24/7. Our voice agent understands natural language, provides instant responses, and learns from every interaction to deliver personalized experiences that drive customer satisfaction and business growth.</p>
            </div>

            <div class="feature-card fade-in">
                <div class="feature-icon"><span>ðŸ“„</span></div>
                <h3>AI Document Scanner</h3>
                <p>Advanced OCR technology that digitizes, analyzes, and extracts insights from any document. Transform paper-based workflows into intelligent digital processes, automate data entry, and unlock valuable business intelligence from your document archives.</p>
            </div>
        </div>
    </div>
</section>

<!-- Benefits Section -->
<section id="benefits" class="benefits">
    <div class="container">
        <h2 class="section-title fade-in">Why Choose VISTAAR?</h2>
        <p class="section-subtitle fade-in">Measurable results that drive business expansion</p>

        <div class="benefits-grid">
            <div class="benefit-item fade-in">
                <div class="benefit-number stats-counter" data-target="85">0</div>
                <h4>Efficiency Boost</h4>
                <p>Average increase in operational efficiency</p>
            </div>

            <div class="benefit-item fade-in">
                <div class="benefit-number stats-counter" data-target="70">0</div>
                <h4>Cost Reduction</h4>
                <p>Decrease in manual processing costs</p>
            </div>

            <div class="benefit-item fade-in">
                <div class="benefit-number stats-counter" data-target="95">0</div>
                <h4>Accuracy Rate</h4>
                <p>Document processing accuracy</p>
            </div>

            <div class="benefit-item fade-in">
                <div class="benefit-number stats-counter" data-target="24">0</div>
                <h4>Always Available</h4>
                <p>Hours of AI-powered support</p>
            </div>
        </div>
    </div>
</section>

<!-- Contact Section (NEW) -->
<section id="contact" class="contact">
    <div class="container">
        <h2 class="section-title fade-in">Get in Touch</h2>
        <p class="section-subtitle fade-in">Tell us a bit about you. Weâ€™ll reach out with a custom demo and pricing.</p>

        <div class="contact-wrap">
            <!-- Form -->
            <div class="contact-card fade-in">
                <h3>Contact Details</h3>
                <p>Fill the form and weâ€™ll call you back.</p>

                <form id="contactForm" novalidate>
                    <!-- honeypot (spam trap) -->
                    <input type="text" name="company_website" id="hp_field" autocomplete="off" tabindex="-1" aria-hidden="true" style="position:absolute; left:-9999px; opacity:0; height:0; width:0;">

                    <div class="form-grid">
                        <div class="field">
                            <label class="label" for="name">Full Name *</label>
                            <input class="input" id="name" name="name" type="text" placeholder="e.g., Jayesh Lodhiya" required minlength="2" />
                        </div>
                        <div class="field">
                            <label class="label" for="email">Email *</label>
                            <input class="input" id="email" name="email" type="email" placeholder="you@company.com" required />
                        </div>
                        <div class="field">
                            <label class="label" for="phone">Phone *</label>
                            <input class="input" id="phone" name="phone" type="tel" placeholder="+91 98765 43210" required pattern="^[0-9+\-\s()]{7,}$" />
                        </div>
                        <div class="field">
                            <label class="label" for="company">Company</label>
                            <input class="input" id="company" name="company" type="text" placeholder="Company / Brand" />
                        </div>
                        <div class="field full">
                            <label class="label" for="message">What are you looking to achieve?</label>
                            <textarea class="textarea" id="message" name="message" placeholder="Tell us about your needs, timelines, and any specific features you want."></textarea>
                        </div>
                    </div>

                    <div class="submit-row">
                        <button class="submit-btn" id="submitBtn" type="submit">Submit</button>
                        <span class="helper" id="formHelper">Weâ€™ll get back within 24 hours.</span>
                    </div>
                </form>
            </div>

            <!-- Meta / Alternate contact -->
            <div class="contact-meta fade-in">
                <ul>
                    <li><strong>Call:</strong> +91 98765 43210</li>
                    <li><strong>Email:</strong> hello@vistaar.ai</li>

                </ul>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section">
    <div class="container">
        <div class="cta-content">
            <h2>Ready to Expand Your Business?</h2>
            <p>Join thousands of businesses already transforming with VISTAAR AI solutions</p>
            <a href="#contact" class="btn-primary" id="startJourney">Start Your AI Journey</a>
        </div>
    </div>
</section>

<!-- Footer -->
<footer>
    <div class="container">
        <p>&copy; 2025 VISTAAR. All rights reserved. Powered by Advanced AI Technology.</p>
    </div>
</footer>

<!-- Toast container -->
<div class="toast" id="toast"></div>

<script>
    // ==== CONFIGURABLES ====
    // By default, calls same-origin: https://your-domain/api/leads
    // If your API is on a different host, set API_BASE manually.
    const API_BASE = window.API_BASE || window.location.origin;
    const LEAD_ENDPOINT = API_BASE + '/api/actions/leads'; // <-- change path if needed

    // Smooth scrolling
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
    });

    // Navbar scroll effect
    window.addEventListener('scroll', () => {
        const navbar = document.getElementById('navbar');
        if (window.scrollY > 50) navbar.classList.add('scrolled'); else navbar.classList.remove('scrolled');
    });

    // Fade-in on view
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(e => e.isIntersecting && e.target.classList.add('visible'));
    }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
    document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));

    // Stats counter
    function animateCounter(element, target) {
        let current = 0, increment = target / 100;
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) { current = target; clearInterval(timer); }
            element.textContent = Math.floor(current) + '%';
        }, 20);
    }
    const statsObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const counter = entry.target;
                const target = parseInt(counter.getAttribute('data-target'));
                animateCounter(counter, target);
                statsObserver.unobserve(counter);
            }
        });
    });
    document.querySelectorAll('.stats-counter').forEach(c => statsObserver.observe(c));

    // Floating dots
    function createFloatingElement() {
        const el = document.createElement('div');
        el.className = 'floating-element';
        el.style.left = Math.random() * 100 + '%';
        el.style.animationDelay = Math.random() * 8 + 's';
        el.style.animationDuration = (Math.random() * 4 + 6) + 's';
        return el;
    }
    const floatingContainer = document.querySelector('.floating-elements');
    for (let i = 0; i < 50; i++) floatingContainer.appendChild(createFloatingElement());

    // CTA ripple
    document.getElementById('startJourney').addEventListener('click', function(e) {
        e.preventDefault();
        const ripple = document.createElement('span');
        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.height, rect.width);
        ripple.style.width = ripple.style.height = size + 'px';
        ripple.style.left = (e.clientX - rect.left - size / 2) + 'px';
        ripple.style.top = (e.clientY - rect.top - size / 2) + 'px';
        ripple.style.position = 'absolute';
        ripple.style.borderRadius = '50%';
        ripple.style.background = 'rgba(255, 255, 255, 0.6)';
        ripple.style.transform = 'scale(0)';
        ripple.style.animation = 'ripple 0.6s linear';
        this.style.position = 'relative'; this.style.overflow = 'hidden';
        this.appendChild(ripple);
        setTimeout(() => ripple.remove(), 600);

        // Scroll to contact
        document.querySelector('#contact').scrollIntoView({ behavior: 'smooth' });
    });
    const style = document.createElement('style');
    style.textContent = `@keyframes ripple { to { transform: scale(4); opacity: 0; } }`;
    document.head.appendChild(style);

    // Parallax hero
    window.addEventListener('scroll', () => {
        const scrolled = window.pageYOffset;
        const hero = document.querySelector('.hero');
        if (hero) hero.style.transform = `translateY(${scrolled * 0.5}px)`;
    });

    // Feature hover border
    document.querySelectorAll('.feature-card').forEach(card => {
        card.addEventListener('mouseenter', function(){ this.style.borderLeft = '4px solid var(--primary)'; });
        card.addEventListener('mouseleave', function(){ this.style.borderLeft = 'none'; });
    });

    // Typing effect
    const typingTexts = ['AI-Powered Solutions','Smart Voice Agents','Intelligent Document Processing','Business Expansion Tools'];
    let textIndex = 0, charIndex = 0, isDeleting = false;
    const typingElement = document.querySelector('.typing-effect');
    function typeText() {
        const currentText = typingTexts[textIndex];
        typingElement.textContent = isDeleting ? currentText.substring(0, --charIndex) : currentText.substring(0, ++charIndex);
        if (!isDeleting && charIndex === currentText.length) setTimeout(() => isDeleting = true, 2000);
        else if (isDeleting && charIndex === 0) { isDeleting = false; textIndex = (textIndex + 1) % typingTexts.length; }
        setTimeout(typeText, isDeleting ? 50 : 100);
    }
    setTimeout(typeText, 2000);

    // ===== CONTACT FORM LOGIC =====
    const form = document.getElementById('contactForm');
    const submitBtn = document.getElementById('submitBtn');
    const helper = document.getElementById('formHelper');
    const toast = document.getElementById('toast');

    const showToast = (msg, type = 'success') => {
        const el = document.createElement('div');
        el.className = 'toast-msg ' + (type === 'error' ? 'error' : type === 'warn' ? 'warn' : '');
        el.textContent = msg;
        toast.appendChild(el);
        setTimeout(() => el.remove(), 3500);
    };

    const validEmail = (email) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    const validPhone = (phone) => /^[0-9+\-\s()]{7,}$/.test(phone);

    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        // Honeypot: if filled, silently ignore
        if (document.getElementById('hp_field').value) return;

        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        const phone = document.getElementById('phone').value.trim();
        const company = document.getElementById('company').value.trim();
        const message = document.getElementById('message').value.trim();

        // Basic validation
        if (!name || !email || !phone) {
            showToast('Please fill required fields: Name, Email, Phone.', 'warn');
            return;
        }
        if (!validEmail(email)) { showToast('Please enter a valid email address.', 'warn'); return; }
        if (!validPhone(phone)) { showToast('Please enter a valid phone number.', 'warn'); return; }

        // Disable + loading
        submitBtn.disabled = true;
        const originalText = submitBtn.textContent;
        submitBtn.textContent = 'Submitting...';
        helper.textContent = 'Sending your details securelyâ€¦';

        // Build payload
        const payload = { name, email, phone, company, message, source: 'vistaar-landing', ts: new Date().toISOString() };

        try {
            const res = await fetch(LEAD_ENDPOINT, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                // If your Spring Boot enables CSRF for this endpoint, add the token header here.
                body: JSON.stringify(payload),
                credentials: 'include' // if same-site cookies are used by your backend
            });

            if (!res.ok) {
                // Try to parse error message
                let errText = 'Failed to submit. Please try again.';
                try {
                    const j = await res.json();
                    if (j && (j.message || j.error)) errText = j.message || j.error;
                } catch(_) { /* ignore */ }
                throw new Error(errText + ` (HTTP ${res.status})`);
            }

            // Expecting JSON back (optional)
            // const data = await res.json().catch(() => ({}));

            showToast('Thank you! We will reach out shortly.');
            form.reset();
            helper.textContent = 'Submitted successfully. Weâ€™ll contact you soon.';
        } catch (err) {
            console.error(err);
            showToast(err.message || 'Something went wrong. Please try again.', 'error');
            helper.textContent = 'Submission failed. Please try again.';
        } finally {
            submitBtn.disabled = false;
            submitBtn.textContent = originalText;
        }
    });
</script>
</body>
</html>
